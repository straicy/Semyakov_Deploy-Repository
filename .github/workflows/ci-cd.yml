# .github/workflows/ci-cd.yml
name: Railway CD Pipeline

on:
  push:
    branches: [ "main" ] # Запускаємо при пуші в гілку main

jobs:
  deploy_to_railway:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4 # 1. Витягуємо код
    
    # 2. Використовуємо актуальну Railway Action (замість застарілої cli-action)
    - name: Deploy to Railway
      uses: railwayapp/railway-action@v3 # Використовуємо актуальний Action
      with:
        # railwayToken: оновлена назва параметра
        railwayToken: ${{ secrets.RAILWAY_TOKEN }}
        # projectId: оновлена назва параметра
        projectId: ${{ secrets.RAILWAY_PROJECT_ID }}